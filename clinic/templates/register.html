{% extends "dental_clinic/base.html" %}
{% block title %}สมัครสมาชิก{% endblock %}
{% block content %}
<div class="min-h-screen bg-gradient-to-b from-white via-[#F6F4FF] to-white flex items-center justify-center p-6">
  <div class="w-full max-w-md bg-white/80 backdrop-blur rounded-2xl shadow-xl ring-1 ring-violet-200 p-6">
    
    <div class="text-center mb-6">
        <div class="mx-auto w-16 h-16 flex items-center justify-center rounded-full bg-violet-100">
            <i class="fa-solid fa-circle-user text-violet-600 text-4xl"></i>
        </div>
      <h2 class="text-2xl font-bold mt-4 text-slate-900">สมัครสมาชิก</h2>
      <p class="text-sm text-slate-600 mt-1">กรอกข้อมูลเพื่อสร้างบัญชีใหม่</p>
    </div>

    {% if messages %}
      <div class="mt-4 space-y-2">
        {% for message in messages %}
          <div class="px-3 py-2 rounded text-sm 
                      {% if message.tags == 'error' %}
                        bg-red-50 text-red-700
                      {% elif message.tags == 'success' %}
                        bg-green-50 text-green-700
                      {% else %}
                        bg-indigo-50 text-indigo-700
                      {% endif %}">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <form method="post" class="mt-6 space-y-4">
      {% csrf_token %}
      {% for field in form %}
        <div>
          <label class="text-sm font-medium text-slate-700">{{ field.label }}</label>
          {{ field.as_widget|safe }}
          <script>
            // ใส่ placeholder ให้แต่ละฟิลด์
            document.addEventListener("DOMContentLoaded", function () {
              const input = document.getElementById("id_{{ field.name }}");
              if (input) {
                if (input.name === "email") input.placeholder = "name@example.com";
                else if (input.name === "username") input.placeholder = "ชื่อผู้ใช้";
                else if (input.name === "first_name") input.placeholder = "สุดาพร";
                else if (input.name === "last_name") input.placeholder = "สงวนดี";
                else if (input.name === "phone") input.placeholder = "0986275730";
                else if (input.name === "password1") input.placeholder = "รหัสผ่าน";
                else if (input.name === "password2") input.placeholder = "ยืนยันรหัสผ่าน";
                input.classList.add(
                  "mt-1","w-full","rounded-xl","border","border-slate-300","px-4","py-2",
                  "focus:ring-2","focus:ring-violet-300","focus:outline-none"
                );
              }
            });
          </script>
          {% if field.errors %}
            <p class="text-red-600 text-sm mt-1">{{ field.errors.0 }}</p>
          {% endif %}
        </div>
      {% endfor %}

      <button type="submit"
              class="w-full py-3 rounded-xl font-bold text-white bg-gradient-to-r from-[#3F2B96] to-[#5B49C9] shadow-md hover:shadow-lg">
        สมัครสมาชิก
      </button>
      <p class="text-center text-sm mt-4">
        มีบัญชีแล้ว? 
        <a href="{% url 'login' %}" class="text-violet-700 hover:underline">เข้าสู่ระบบ</a>
      </p>
    </form>
  </div>
</div>
{% endblock %}
